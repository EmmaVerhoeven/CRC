<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>engage CRC PodWalks</title>
    <link rel="stylesheet" href="style2.css">
</head>

<body>
    <header>
        <h1>PodWalks door Cool Zuid</h1>
    </header>

    <main>
        <div class="intro">
            <p>
                Deze geluidsfragmenten zijn gemaakt door de
                <a href="/index.html">Creative Research Crew</a> tijdens de workshop PodWalk making
                door <a href="https://maeheritage.com">MAE Heritage</a>, als onderdeel van het engage wijkprogramma.
                Beluister ze hieronder!
            </p>
        </div>
        <div id="audio-grid"></div>
    </main>

    <img class="logo" src="/img/logo.png" alt="">

    <!-- Load the Google API client library -->
    <script src="https://apis.google.com/js/api.js" onload="handleClientLoad()"></script>

    <script>
        function handleClientLoad() {
            console.log("Google API client loaded.");
            gapi.load("client", initClient);
        }

        function initClient() {
            gapi.client.init({
                apiKey: '9ee0ac0166cdb3ddc65410f6f47bf0672acba06b', // replace with your actual API key
                discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
            }).then(listFiles);
        }

        async function listFiles() {
            try {
                const folderId = '1JppArjXxHW8rOgUYvecq0OvIEtJCfuGP'; // your folder ID
                const response = await gapi.client.drive.files.list({
                    q: `'${folderId}' in parents and mimeType='audio/mpeg'`,
                    fields: 'files(id, name, webContentLink)',
                });

                const files = response.result.files;
                if (files.length === 0) {
                    console.log("No audio files found.");
                    return;
                }

                const grid = document.getElementById('audio-grid');
                files.forEach(file => {
                    const displayName = file.name
                        .replace('.mp3', '')
                        .replace(/[-_]/g, ' ')
                        .replace(/\b\w/g, c => c.toUpperCase());

                    const card = document.createElement('div');
                    card.className = 'audio-card';
                    card.innerHTML = `
            <h2>${displayName}</h2>
            <audio controls src="https://drive.google.com/uc?id=${file.id}&export=download"></audio>
          `;
                    grid.appendChild(card);
                });
            } catch (err) {
                console.error('Error fetching files:', err);
            }
        }
    </script>
</body>

</html>